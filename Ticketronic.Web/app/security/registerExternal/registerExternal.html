<section class="mainbar" data-ng-controller="registerExternal as vm">
    <section class="matter">
        <div class="container-fuild">
            <div class="row">
                <div class="widget wviolet">
                    <div class="container" >
                        <div class="row register-external-form">
                            <div class="col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3" ng-hide="vm.message">
                                <h3>Register</h3>
                                <p class="text-success">
                                    You've successfully authenticated with <strong ng-bind="security.externalUser.loginProvider"></strong>.
                                    Please enter an email, first and last name then click Register to create a new account.
                                    If you already have an account please click cancel and associate your social login provider from your account page.
                                </p>
                                <form role="form" name="vm.registerForm" ng-submit="vm.registerExternalUser()">
                                    <auto:fields fields="vm.schema" data="vm.security.externalUser"></auto:fields>
                                    <button type="submit" class="btn btn-default" ng-class="{'btn-primary':vm.registerForm.$valid}">Register</button>
                                    <a class="btn btn-default" ng-click="!security.user || security.logout()" href="/login">Cancel</a>
                                </form>
                            </div>
                            <div class="col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3" ng-show="vm.message">
                                <p class="lead" ng-bind="vm.message"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</section>